<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Eviatar Guttman - What is Merger Simulation?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Eviatar Guttman</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./1_mortgage.html">Mortgage Simulation</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-merger-simulation" role="button" data-bs-toggle="dropdown" aria-expanded="false">Merger Simulation</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-merger-simulation">    
        <li>
    <a class="dropdown-item" href="./2_merger_sim_intro.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./3_multinomial_logit.html">
 <span class="dropdown-text">Multinomial logit</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./4_nested.html">
 <span class="dropdown-text">Nested Logit</span></a>
  </li>  
    </ul>
  </li>
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#equation-system-of-the-structural-model" id="toc-equation-system-of-the-structural-model" class="nav-link active" data-scroll-target="#equation-system-of-the-structural-model">Equation system of the structural model</a>
  <ul class="collapse">
  <li><a href="#bertrand-model-with-differentiated-products" id="toc-bertrand-model-with-differentiated-products" class="nav-link" data-scroll-target="#bertrand-model-with-differentiated-products">Bertrand model with differentiated products</a></li>
  <li><a href="#the-multinomial-logit-model" id="toc-the-multinomial-logit-model" class="nav-link" data-scroll-target="#the-multinomial-logit-model">The multinomial logit model</a></li>
  <li><a href="#nested-logit" id="toc-nested-logit" class="nav-link" data-scroll-target="#nested-logit">Nested Logit</a></li>
  <li><a href="#useful-references" id="toc-useful-references" class="nav-link" data-scroll-target="#useful-references">Useful references</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">What is Merger Simulation?</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>The next pages presents code examples of merger simulation implementation.</p>
<p>Merger simulation is a framework that uses economic models grounded in the theory of industrial organization to predict the effect of mergers on prices in markets. Merger simulation is at the frontier of the empirical economics used by competition authorities.</p>
<p>Generally, every merger simulation uses oligopoly model calibrated to observed prices and quantities in the relevant market. It is a quantitative tool to create predictions about the probable outcome effect of a merger on competition. specifically, It aims at giving numerical predictions of price and quantity change due to a merger.</p>
<p>The process can be divided to three stages:<br>
(1) Selection of a structural model of supply and demand.<br>
(2) Calibration model’s parameters to the available data.<br>
(3) Computation of new equilibrium that will prevail post merger.</p>
<p>Let’s briefly expand on these three steps referring to the examples that will be presented below. After that, those who want to delve into the math involved in implementing the examples can continue on this page, and those who want to access the code directly will continue to the following pages.</p>
<p>(1) The structural model</p>
<p>Selecting the structural model is the theoretical part of the process where the researcher needs to fit the right model to the market facts. The structuralist model consists of an assumed supply curve taken from an oligopoly model and a demand system that should resemble consumer preferences. In practice, many time the demand system is chosen to fit data and computation limitations.</p>
<p>Here, on the supply side we’ll use a <a href="https://www.concurrences.com/en/dictionary/bertrand-nash-equilibrium#:~:text=The%20Bertrand%20differentiated%20products%20model%20is%20applicable%20to%20markets%20where,particularly%20relevant%20for%20retail%20markets.">Bertrand model with differentiated products</a>. On the demand side versions of logit demand systems will be used. Scpecifically, the <a href="https://eml.berkeley.edu/books/choice2nd/Ch03_p34-75.pdf">multinomial logit</a> and <a href="https://eml.berkeley.edu/books/choice2nd/Ch04_p76-96.pdf">one level nested logit</a> will be used in the forthcoming examples. This specification is common for competition agencies to work with.<br>
</p>
<p>(2) model calibration</p>
<p>As stated above, the structural model needs to be calibrated to observed data about prices and quantities. (There are cases where its possible to calibrate supply side and solve numerically for the demand system parameters but that’s beyond the scope of this document) Two techniques are common. (1) The hard way is to implement a process of <a href="https://cowles.yale.edu/sites/default/files/d2301.pdf">demand estimation</a> to estimate the parameters of the demand function. It is a demanding process both in terms of the required data efforts. Another approach is to calibrate the model using carefully selected parameters based on qualitative knowledge of the market or other limited quantitative data available to the researcher. Here, for demonstration we’ll choose arbitrary demand parameters.</p>
<p>(3) Equilibrium computation</p>
<p>In almost all cases (except for specific cases with linear demand system), no analytical solution exists for the equation system that characterized by the structural model. Some kind of numeric solution method is required. Here I’ll use fixed point iteration algorithm.</p>
<p>Whats next?</p>
<p>The examples shown here are predominant techniques in merger simulation implementation. The next page presents simplified example of <a href="./3_multinomial_logit.html">multinomial logit</a>. The aim is to make the code as easy as possible to digest. The second example presents a more advanced example of <a href="./4_nested.html">one level nested logit</a> accompanied with production-level code.</p>
<p>For those who with to continue with the theoretical part, I’ve added below mathematical explanations of the Bertrand model with differentiated products , the matrix algebra needed to solve the system and explanations of the relevant logit demand systems.</p>
<section id="equation-system-of-the-structural-model" class="level1">
<h1>Equation system of the structural model</h1>
<p>First, the equations of the Bertrand model followed by the a short explanation of two logit models.</p>
<section id="bertrand-model-with-differentiated-products" class="level2">
<h2 class="anchored" data-anchor-id="bertrand-model-with-differentiated-products">Bertrand model with differentiated products</h2>
<p>A very good explanation of how the betrand model works is written by <a href="mailto:jonas@bjornerstedt.org">Jonas Björnerstedt</a> (Swedish competition authority) and <a href="mailto:frank.verboven@kuleuven.be">Frank Verboven</a> (University of Leuven) in their <a href="https://sites.google.com/site/frankverbo/data-and-software/merger-simulation-with-nested-logit-demand">merger simulation implementation in stata</a>. The next few images are taken from section 2 of their paper:</p>
<p><img src="simulation_data/verboven1.PNG" class="img-fluid"></p>
<p><img src="simulation_data/verboven2.PNG" class="img-fluid"></p>
<p><img src="simulation_data/verboven3.PNG" class="img-fluid"></p>
</section>
<section id="the-multinomial-logit-model" class="level2">
<h2 class="anchored" data-anchor-id="the-multinomial-logit-model">The multinomial logit model</h2>
<p>A good explanation of the logit model is in the <a href="https://cran.r-project.org/web/packages/antitrust/vignettes/Reference.html">vignette</a> of the <a href="https://cran.r-project.org/web/packages/antitrust/index.html">r package antitrust</a> by authored by Charles Taragin and Michael Sandfort. The explanation below is a selection from the package’s vignette:</p>
<p>Logit demand is based on a discrete choice model that assumes that each consumer is willing to purchase at most a single unit of one product from the <span class="math inline">\(n\)</span> products available in the market. The assumptions underlying Logit demand imply that the probability that a consumer purchases product <span class="math inline">\(i \in n\)</span> is given by</p>
<span class="math display">\[\begin{align*}
  s_i=&amp; \frac{\exp(V_i)}{\sum\limits_{k \in n}\exp(V_k)},&amp;
\end{align*}\]</span>
<p>where <span class="math inline">\(s_i\)</span> is product <span class="math inline">\(i\)</span>’s <em>quantity</em> share and <span class="math inline">\(V_i\)</span> is the (average) indirect utility that a consumer receives from purchasing product <span class="math inline">\(i\)</span>. We assume that <span class="math inline">\(V_i\)</span> takes on the following form</p>
<span class="math display">\[\begin{align*}
  V_i=&amp;\delta_i + \alpha p_i,&amp;\alpha&lt;0.
\end{align*}\]</span>
<p>The Logit demand system yields the following own- and cross-price elasticities:</p>
<span class="math display">\[\begin{align*}
  \epsilon_{ii}=&amp;\alpha (1-s_i)p_i \\
  \epsilon_{ij}=&amp;-\alpha s_jp_j
\end{align*}\]</span>
</section>
<section id="nested-logit" class="level2">
<h2 class="anchored" data-anchor-id="nested-logit">Nested Logit</h2>
<p>By construction, Logit demand assumes that diversion occurs according to quantity share. While convenient, one potential drawback of this assumption is that diversion according to share may not accurately represent consumer substitution patterns. One way to relax this assumption is to group the <span class="math inline">\(n\)</span> products into <span class="math inline">\(n &gt; H \ge 2\)</span> <em>nests</em>, with products in the same nest assumed to be closer substitutes than products in different nests.</p>
<p>The assumptions underlying nested Logit demand imply that the probability that a consumer purchases product <span class="math inline">\(i\)</span> in nest <span class="math inline">\(h\in H\)</span> is given by</p>
<span class="math display">\[\begin{align*}
  s_i=&amp; s_{i|h}s_h,&amp;\\
  s_{i|h}=&amp;\frac{\exp(\frac{V_i}{\sigma_h})}{\sum\limits_{k \in
      h}\exp(\frac{V_k}{\sigma_h})},&amp; 1 \ge \sigma_h \ge 0\\
  s_{h}=&amp; \frac{\exp(\sigma_hI_h)}{\sum\limits_{l\in H}\exp(\sigma_lI_l)},&amp; I_h=\log\sum\limits_{k \in h}\exp\left(\frac{V_k}{\sigma_h}\right).
\end{align*}\]</span>
<p>We assume that <span class="math inline">\(V_i\)</span> takes on the following form</p>
<span class="math display">\[\begin{align*}
  V_i=&amp;\delta_i + \alpha p_i,&amp; \alpha\le 0.
\end{align*}\]</span>
<p>The Nested Logit demand system yields the following own- and cross-price elasticities:</p>
<span class="math display">\[\begin{align*}
  \epsilon_{ii}=&amp;
    [1-s_i + (\frac{1}{\sigma_h}-1)(1-s_{i|h})]\alpha p_i, \\
  \epsilon_{ij}=&amp;\begin{cases}
    -[s_j + (\frac{1}{\sigma_h}-1)s_{j|h}]\alpha p_j, &amp;
    \text{if $i,j$ are both in nest $h$}.\\
    -\alpha s_jp_j, &amp; \text{if $i$ is not in nest $h$ but $j$ is}.
  \end{cases}
\end{align*}\]</span>
<p>Notice how these cross-price elasticities are identical to the non-nested Logit elasticities when products <span class="math inline">\(i,j\)</span> are in different nests, but are larger when products <span class="math inline">\(i,j\)</span> are in the same nests. This observation is consistent with the claim that products within a nest are closer substitutes than products outside of a nest.</p>
</section>
<section id="useful-references" class="level2">
<h2 class="anchored" data-anchor-id="useful-references">Useful references</h2>
<p>For more information about the mathematical implementation and the theory, one can read<br>
<a href="https://www.stata-journal.com/article.html?article=st0349">Björnerstedt and Verboven</a></p>
<p>To understand more about the Logit demand system (multinumial and nested logit) and the implementation in these pages its best to read <a href="https://www.jstor.org/stable/2555829#metadata_info_tab_contents">berry 1994</a>.</p>
<p>To get a wider perspective about possible implementations for antitrust practitioners, see the work of <a href="https://cran.r-project.org/web/packages/antitrust/index.html">Taragin and Sandfort</a></p>
<p>and finally, a very good source to understand the procedure of demand estimaion, a good place to start is <a href="https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1430-9134.2000.00513.x">Aviv nevo’s practitioner’s Guide</a></p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Copyright 2022, Eviatar Guttman</div>
  </div>
</footer>



</body></html>